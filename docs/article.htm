<!DOCTYPE HTML>
<!--------------------------------------------------------------------------->  
<!--                           INTRODUCTION                                

 The CodeProject article submission template (HTML version)

Using this template will help us post your article sooner. To use, just 
follow the 3 easy steps below:
 
     1. Fill in the article description details
     2. Add links to your images and downloads
     3. Include the main article text

That's all there is to it! All formatting will be done by our submission
scripts and style sheets. 

-->  
<!--------------------------------------------------------------------------->  
<!--                        IGNORE THIS SECTION                            -->
<html>
<head>
<title>CodeProject</title>
<Style>
BODY, P, TD { font-family: Verdana, Arial, Helvetica, sans-serif; font-size: 10pt }
BODY {padding:15px; }
H2,H3,H4,H5 { color: #ff9900; font-weight: bold; }
H2 { font-size: 13pt; }
H3 { font-size: 12pt; }
H4 { font-size: 10pt; color: black; }
PRE { BACKGROUND-COLOR: #FBEDBB; FONT-FAMILY: "Courier New", Courier, mono; WHITE-SPACE: pre; }
CODE { COLOR: #990000; FONT-FAMILY: "Courier New", Courier, mono; }
</style>
<link type="text/css" rel="stylesheet" 
      href="https://codeproject.global.ssl.fastly.net/App_Themes/CodeProject/Css/Main.min.css">
</head>
<body bgcolor="#FFFFFF" color=#000000>
<!--------------------------------------------------------------------------->  


<!-------------------------------     STEP 1      --------------------------->
<!--  Fill in the details (CodeProject will reformat this section for you) -->

    <pre>
Title:       msgfiles, a file sending system
Description: Code for a basic client-server and application for network file transfers
Abstract:    msgfiles is designed to be set up on a shared network to support multiple users transferring files to each other.  Well suitied to homes, schools, and offices, where there is a general level of trust between the users.  The code is designed to be scalable, so internet installations are possible.  I'm don't want to run a .com, but perhaps you do.  And I would be here to help.

Author:      Michael Sydney Balloni
Email:       balloni.michael@yahoo.com

Language:    C#
Platform:    Cross-Platform
Technology:  .NET
Topic:       File Storage and Transfer

Section      General Programming
SubSection   Internet

License:     Apache 2.0
</pre>

<!-------------------------------     STEP 2      --------------------------->
<!--  Include download and sample image information.                       --> 

<ul class=download>
<!-- FORNOW - Collect the goodies -->
<li><a href="Article_demo.zip">Download demo project - XXX Kb </a></li>
<li><a href="Article_src.zip">Download source - XXX Kb</a></li>
</ul>

<!-------------------------------     STEP 3      --------------------------->

<!--  Add the article text. Please use simple formatting (<h2>, <p> etc)   -->

<h2>Introduction</h2>
<p>
    I worked for a cloud storage .com back in the 2000's, 
    when clouds were on whiteboards, not industries.  
    We called it online file storage.
    You'd upload your files, then you could access them anywhere...
    and send them to your friends.
    It wasn't file sharing like Napster / Gnutella / Limewire,
    you weren't sharing your CD collection with the internet.
    But you could send your CD collection to your sister.
    So we considered this to be "fair use" and stayed below the radar.
</p>
<p>
    A lot of tech has evolved and emerged since then, 
    and you can make the argument that there's no justificate for file sharing, or sending,
    because there is a bustling marketplace for buying and renting access to files online.
    Pay your monthly fee for access to one castle,
    and send whatever you want to somebody else paying a monthly fee to the same castle.
    All legit, all above-board.
    Something like Napster will never (be allowed to) exist again.
</p>
<p>
    So what's this msgfiles business all about then?
    Well, what if what you want to send is not in one of these castles for rent?
    What if you've just created something new, and want to send it to a friend?
    There are services for sending attachments of any size.
    You could ZIP a large directory of files and send that as a large attachment,
    a CD collection to your sister even.
</p>
<p>
    And we're back to cloud computing.
</p>
<p>
    msgfiles is not that.
    It is all about locality, and simplicity.
    Your home, your work, your dorm.
    Portable command-line server.
    Portable command-line client.
</p>

<h2>msgfiles - The Client App</h2>
<p>
    msgfiles send from to msg filepath
    msgfiles recv ticket filepath
</p>

<h2>msgfilesd - The Server App</h2>
<p>
    msgfilesd port
    Listens on port
    Receives connection
    Fires off Task to process connection
    Task 
        send:
            receives request header
            creates ticket for request
            receives file into temp dir
            adds record to database
            replies with ticket
        recv:
            receive ticket
            look up database record
            deletes database record
            replies with file
            deletes file
</p>

<p>
    Here is the reference of available commands:
</p>
<pre>

</pre>
<h3>Using the code</h3>

<p>Lead with code!</p>

<pre>//
// Any source code blocks look like this
//
var i = 0;
...</pre>

<p>It's always good to cut to the chase, but always include a discussion on how to
 use the article or code. The <code>class</code> names, the methods and properties,
 or any tricks or tips. </p>

<p>Remember to set the Language of your code snippet using the Language dropdown. </p>

<h3>Basic principles</h2>

<p>Are there basic principles you need to introduce to the reader for them to
understand the code or the topic? Links to other articles or online docs may
be helpful</p>

<h3>Step by Step walk-throughs</h3>

<p>For walk-through style articles ensure your screenshots, code samples and code
are up to date, or at the least ensure you're clear on what version of a technology
you're discussing. APIs change!</p>

<h2>Conclusion and Points of Interest</h2>

<p>What did the reader learn in this article? Did you learn anything interesting/fun/annoying 
while writing the code? Any gotchas you came across?</p>


<!-------------------------------    That's it!   --------------------------->
</body>

</html>

